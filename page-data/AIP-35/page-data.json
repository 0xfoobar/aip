{"componentChunkName":"component---src-templates-aip-post-js","path":"/AIP-35/","result":{"data":{"site":{"siteMetadata":{"title":"Aave Improvement Proposals","siteUrl":"https://aave.github.io/aip"}},"avatar":{"childImageSharp":{"fixed":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsSAAALEgHS3X78AAAFDUlEQVQ4y3WU+VNTVxTH34z/Aj/Jn9Bp7bQdWoprHa11R7EBCUsIIiigLIKCS1RAoyhoXgSEJGRPXpKXfQ8QYmIzoNSKSztSa5WMUOyMmf6Ux8s9vXkRpu1Mz8ydeXc5n3fPPed8ieNiJ9F5jiYy1nLZvob4YOJm09qbjUYBWacn7x7R0aMCDa3lq0iqWCmwFinWrpxzFco5HwtvlHDvkxNEmdTLbTRecXIbneesORc6LGT3KXPydpsDhltdIG+wgqbOApYaK1grKDDzRpP2gwrSs0+W80+o7ZAi+5e66y5u4WSPo6Dtom2+qzsIlzqs0NNqYm80UYyk0cgOHTOwsmodo6pQs8ZSNQT4JnAckM9jaAEH3Z+FEtV9bu7j6A33+nqxc/mU2AftIlvq7FkaXT5jQV0njai7RoOuC1RIKtQgebUWqcvVyHBYmXIVa8FZKF/G0PUZhnsFypf6cqpueRLHbgeh4aqTae5ywGmRDbW3UYi85gMf9QBChmlQX3ABWaFCiiot0pSrwViiZNw8LeCQE7692fA5Kx70k0JFFIT9nlRtrxtOiJ2o4TyNbK5HsLzMwoplviPGByCtVKFRDNWWqYEqUaZCh6kMlORge0dDuQdHgsmSu0EoJ73pI7e8qKrHjm5pYqsgQJmBVqe2vjGQliuRMgPlq9KWEhXgJCXxO+YSO9VjggOGGBSNBNiSQT+qlPoQ/6odoo9fc84a+gH88e4v+BMPWhvn1p7FX0J/pQpkNTqkrNQgXamKdZcawFakEBDb9BOSvbZp2KcIMYeGA6h0wA+lfW6YmVvgnIcNcUgsJGERDx1+lozNzSbgZq0OBmr1MCLUImWFmnEKLJlykhCbTWF6hy0O+KbsfkUIfT8cAJ7EA9Nzb1dDfPFqCZ6/WFid//J4HsT1epDUG2DwqA7JhFrWJDSBvlRFEwXWSXqrawq268fZXeoxVKgIwYEBH0z9mgWwaQQMw0IKj3Q6za39PDsPuJzg5gkKJMcNaLBGx+qOWgCXE0186bhHbgr+CFuoMPOtbhztUY3BnmE/xF9mgctsOpuTDJzNAp89SYCohQJxiwlweyLymJ7R1ttBXqWREJ+7o4L84EPYQE+y31BhtANDd8gD8MOrRfg/e/osAZ3tZuhuN6NrzSbUhztppNEKQzU6AfGJP5b7mSea/MoVg42WyfRW4wTapg6hiZdvYeb1ErxaSsKTN+/g+e9L8HrxPTydW4SZ2TfQjjtJ1EGj7jZzurfZDP0NxvdYSLKisc4fI/MijyHfHkltskzCZnzLid8WkMg/A5LwLBxXh6FJPg4y3yOQUHGYeTKPWkRW1HneCqIzllT/WS9ca6LI1U75KHg/Z50vlsgLTsHXtgizwRSGxuBDxKMiaJcsAAeH/FAs9QIfl9PJOwHUq4miE112wELCiC664OJpS+JKqynbejhkrqE/DtwvwNDlvMAUFFgjqXzDeHorvunubOYRD9co/44PVfR7kEDsSGMhSX0QEgYLCac4FzroNf+Frv/UG0vkh3+CjY4obDGFWZx5ZrdqjC2UBVnekJ8pk/rYatIPjXcmM0KSaO6yc0pz5rw1C/vCHc2+o28VmoOTJMHllNzknYbtnoewk47Dfuo+8HDX8JURKCO9SWGfR1Lb6+LCPHUpq/Q9bWYM8MeIPNe9f0EzhsspFydJgDNP4szT32nGaCwkZNFwQFAy4MtdOYdFmfPBKkXg8Im/Adw6zkzX1w4vAAAAAElFTkSuQmCC","width":30,"height":30,"src":"/aip/static/689aad3b5746be423e8a551069ccd17b/91664/logo.png","srcSet":"/aip/static/689aad3b5746be423e8a551069ccd17b/91664/logo.png 1x,\n/aip/static/689aad3b5746be423e8a551069ccd17b/ad39b/logo.png 1.5x,\n/aip/static/689aad3b5746be423e8a551069ccd17b/183c2/logo.png 2x"}}},"allMarkdownRemark":{"edges":[{"node":{"fields":{"slug":"/AIP-37/"},"frontmatter":{"status":"Proposed","aip":37,"title":"Update to the Liquidity Mining Distribution"}}},{"node":{"fields":{"slug":"/AIP-35/"},"frontmatter":{"status":"Proposed","aip":35,"title":"Adjust interest rate to account for APY over-approximation"}}},{"node":{"fields":{"slug":"/AIP-33/"},"frontmatter":{"status":"Proposed","aip":33,"title":"Add FEI to Aave V2"}}},{"node":{"fields":{"slug":"/AIP-32/"},"frontmatter":{"status":"Proposed","aip":32,"title":"Extend Liquidity Incentives for Aave v2"}}},{"node":{"fields":{"slug":"/AIP-29/"},"frontmatter":{"status":"Proposed","aip":29,"title":"Add FRAX to Aave V2"}}},{"node":{"fields":{"slug":"/AIP-28/"},"frontmatter":{"status":"Proposed","aip":28,"title":"Polygon Cross-chain Governance Test"}}},{"node":{"fields":{"slug":"/AIP-27/"},"frontmatter":{"status":"Proposed","aip":27,"title":"Lower Reserve Factor for AMPL"}}},{"node":{"fields":{"slug":"/AIP-26/"},"frontmatter":{"status":"Proposed","aip":26,"title":"Raise Maximum Interest Rate on AMPL Market"}}},{"node":{"fields":{"slug":"/AIP-25/"},"frontmatter":{"status":"Proposed","aip":25,"title":"Extend Liquidity Incentives for Aave v2"}}},{"node":{"fields":{"slug":"/AIP-24/"},"frontmatter":{"status":"WIP","aip":24,"title":"Add PAX to Aave V2"}}},{"node":{"fields":{"slug":"/AIP-23/"},"frontmatter":{"status":"Proposed","aip":23,"title":"Add BarnBridge (BOND) to Aave"}}},{"node":{"fields":{"slug":"/AIP-22/"},"frontmatter":{"status":"Proposed","aip":22,"title":"Add RAI to Aave V2"}}},{"node":{"fields":{"slug":"/AIP-21/"},"frontmatter":{"status":"Proposed","aip":21,"title":"Set Reserve Factors for GUSD and CRV"}}},{"node":{"fields":{"slug":"/AIP-20/"},"frontmatter":{"status":"Proposed","aip":20,"title":"Safety Incentives Implementation"}}},{"node":{"fields":{"slug":"/AIP-19/"},"frontmatter":{"status":"Proposed","aip":19,"title":"Whitelist Curve Liquidity Mining Claim"}}},{"node":{"fields":{"slug":"/AIP-18/"},"frontmatter":{"status":"Proposed","aip":18,"title":"Aavenomics quarterly upgrade Q2 2021"}}},{"node":{"fields":{"slug":"/AIP-17/"},"frontmatter":{"status":"Proposed","aip":17,"title":"Aave Grants DAO"}}},{"node":{"fields":{"slug":"/AIP-16/"},"frontmatter":{"status":"Proposed","aip":16,"title":"introduce Liquidity Incentives for Aave v2"}}},{"node":{"fields":{"slug":"/AIP-15/"},"frontmatter":{"status":"Proposed","aip":15,"title":"Upgrade Aave V1 repayment for migration tool"}}},{"node":{"fields":{"slug":"/AIP-14/"},"frontmatter":{"status":"Proposed","aip":14,"title":"Enable borrowing on renFIL"}}},{"node":{"fields":{"slug":"/AIP-13/"},"frontmatter":{"status":"Proposed","aip":13,"title":"Add renFIL support to Aave"}}},{"node":{"fields":{"slug":"/AIP-12/"},"frontmatter":{"status":"Proposed","aip":12,"title":"Adding AMPL on AAVE"}}},{"node":{"fields":{"slug":"/AIP-11/"},"frontmatter":{"status":"Proposed","aip":11,"title":"desactivation of Aave V1 stable rate borrowing"}}},{"node":{"fields":{"slug":"/AIP-10/"},"frontmatter":{"status":"WIP","aip":10,"title":"Adding xSushi on AAVE"}}},{"node":{"fields":{"slug":"/AIP-9/"},"frontmatter":{"status":"Proposed","aip":9,"title":"Activation of the Aave Balancer Pool Liquidity Staking"}}},{"node":{"fields":{"slug":"/AIP-8/"},"frontmatter":{"status":"Proposed","aip":8,"title":"Adding BAL on AAVE"}}},{"node":{"fields":{"slug":"/AIP-7/"},"frontmatter":{"status":"Proposed","aip":7,"title":"Aavenomics Quarterly Upgrade"}}},{"node":{"fields":{"slug":"/AIP-6/"},"frontmatter":{"status":"Implemented","aip":6,"title":"Adding GUSD on AAVE"}}},{"node":{"fields":{"slug":"/AIP-5/"},"frontmatter":{"status":"Implemented","aip":5,"title":"Adding CRV on AAVE"}}},{"node":{"fields":{"slug":"/AIP-4/"},"frontmatter":{"status":"Implemented","aip":4,"title":"Activation of Aave Protocol Governance V2"}}},{"node":{"fields":{"slug":"/AIP-3/"},"frontmatter":{"status":"Implemented","aip":3,"title":"V1 upgrades for seamless transition to AAVE v2"}}},{"node":{"fields":{"slug":"/AIP-2/"},"frontmatter":{"status":"Implemented","aip":2,"title":"Bootstrap of the AAVE Governance Fund"}}},{"node":{"fields":{"slug":"/AIP-1/"},"frontmatter":{"status":"Implemented","aip":1,"title":"LEND/AAVE migration and activation of the Safety Module"}}}]},"markdownRemark":{"id":"4d911ddc-0e1b-5af9-8c40-4c90c2687f6e","excerpt":"Simple Summary Update interest rate on AMPL market to account for over-approximation in compounded interest computation. Make use of the exponential curve due…","html":"<h2>Simple Summary</h2>\n<ul>\n<li>Update interest rate on AMPL market to account for over-approximation in compounded interest computation.</li>\n<li>Make use of the exponential curve due to the over-approximation to set higher max APY.</li>\n</ul>\n<h2>Motivation</h2>\n<p>In AAVEs MathUtils an over-approximation in the application of the interest rate for computing compounded interest was discovered. </p>\n<h3>In <a href=\"https://github.com/aave/protocol-v2/blob/baeb455fad42d3160d571bd8d3a795948b72dd85/contracts/protocol/libraries/math/MathUtils.sol#L45\">calculateCompoundedInterest</a> method</h3>\n<p>Periodic rate (per second) is computed as:</p>\n<p>uint256 ratePerSecond = rate / SECONDS<em>PER</em>YEAR;</p>\n<p>in comparison to the exact computation.</p>\n<p><img src=\"https://github.com/aave/aip/blob/debf98b7ebe21b2964b3dc03843854c78709d813/content/assets/AIP-35/rate_per_second.png?raw=true\" alt=\"|281x35\"></p>\n<p>derived from:</p>\n<p><img src=\"https://github.com/aave/aip/blob/debf98b7ebe21b2964b3dc03843854c78709d813/content/assets/AIP-35/apy_formula.jpeg?raw=true\" alt=\"|269x48\"></p>\n<p>The deviation in the applied interest rate causes a small over-approximation for APYs &#x3C;10%, but grows exponentially as can be seen below.</p>\n<table>\n<thead>\n<tr>\n<th>Expected APY</th>\n<th>Effective APY</th>\n<th>Expected daily rate</th>\n<th>Effective daily rate</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>4.00%</td>\n<td>4.08%</td>\n<td>0.01%</td>\n<td>0.01%</td>\n</tr>\n<tr>\n<td>5.00%</td>\n<td>5.13%</td>\n<td>0.01%</td>\n<td>0.01%</td>\n</tr>\n<tr>\n<td>10.00%</td>\n<td>10.52%</td>\n<td>0.03%</td>\n<td>0.03%</td>\n</tr>\n<tr>\n<td>50.00%</td>\n<td>64.87%</td>\n<td>0.11%</td>\n<td>0.14%</td>\n</tr>\n<tr>\n<td>100.00%</td>\n<td>171.83%</td>\n<td>0.19%</td>\n<td>0.27%</td>\n</tr>\n<tr>\n<td>200.00%</td>\n<td>638.91%</td>\n<td>0.31%</td>\n<td>0.55%</td>\n</tr>\n<tr>\n<td>1000.00%</td>\n<td>2202543.09%</td>\n<td>0.68%</td>\n<td>2.78%</td>\n</tr>\n<tr>\n<td>10000.00%</td>\n<td>2.69E+43%</td>\n<td>1.30%</td>\n<td>31.52%</td>\n</tr>\n</tbody>\n</table>\n<p>This difference is especially noticeable in the AMPL market, where the configured interest rate can go up to 10,002% at max utilization.</p>\n<p>The AAVE Genesis team has been made aware and they will publish more guidance on the discrepancy.</p>\n<h2>Specification</h2>\n<p>As mentioned in AIP-26, a nonlinear - logistic or exponential - interest curve is more suited for\nAMPL’s market and potentially other assets on AAVE’s platform.</p>\n<p>The over-approximation mentioned above results in an exponential curve which allows for defining a\nmore suitable interest curve for AMPL. We propose the following parameters, which produces the curve below.</p>\n<ul>\n<li>Optimal utilization = 80%</li>\n<li>Base rate = 1%</li>\n<li>Slope1 = 2%</li>\n<li>Slope2 = 750%</li>\n</ul>\n<p><img src=\"https://github.com/aave/aip/blob/debf98b7ebe21b2964b3dc03843854c78709d813/content/assets/AIP-35/curve.png?raw=true\" alt=\"|624x384\" title=\"Chart\"></p>\n<h5>APY table above 80% Utilization:</h5>\n<table>\n<thead>\n<tr>\n<th>Utilization</th>\n<th>APY</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>80.00%</td>\n<td>3.05%</td>\n</tr>\n<tr>\n<td>81.00%</td>\n<td>49.93%</td>\n</tr>\n<tr>\n<td>82.00%</td>\n<td>118.15%</td>\n</tr>\n<tr>\n<td>83.00%</td>\n<td>217.40%</td>\n</tr>\n<tr>\n<td>84.00%</td>\n<td>361.82%</td>\n</tr>\n<tr>\n<td>85.00%</td>\n<td>571.94%</td>\n</tr>\n<tr>\n<td>86.00%</td>\n<td>877.67%</td>\n</tr>\n<tr>\n<td>87.00%</td>\n<td>1322.50%</td>\n</tr>\n<tr>\n<td>88.00%</td>\n<td>1969.72%</td>\n</tr>\n<tr>\n<td>89.00%</td>\n<td>2911.43%</td>\n</tr>\n<tr>\n<td>90.00%</td>\n<td>4281.60%</td>\n</tr>\n<tr>\n<td>91.00%</td>\n<td>6275.19%</td>\n</tr>\n<tr>\n<td>92.00%</td>\n<td>9175.85%</td>\n</tr>\n<tr>\n<td>93.00%</td>\n<td>13396.29%</td>\n</tr>\n<tr>\n<td>94.00%</td>\n<td>19536.98%</td>\n</tr>\n<tr>\n<td>95.00%</td>\n<td>28471.63%</td>\n</tr>\n<tr>\n<td>96.00%</td>\n<td>41471.48%</td>\n</tr>\n<tr>\n<td>97.00%</td>\n<td>60386.14%</td>\n</tr>\n<tr>\n<td>98.00%</td>\n<td>87906.81%</td>\n</tr>\n<tr>\n<td>99.00%</td>\n<td>127949.14%</td>\n</tr>\n<tr>\n<td>100.00%</td>\n<td>186210.38%</td>\n</tr>\n</tbody>\n</table>\n<h5>The part of the curve under 80% Utilization:</h5>\n<p><strong><img src=\"https://github.com/aave/aip/blob/debf98b7ebe21b2964b3dc03843854c78709d813/content/assets/AIP-35/curve_under_optimal.png?raw=true\" alt=\"|624x325\" title=\"Chart\"></strong></p>\n<h2>Rationale</h2>\n<ol>\n<li>Accounting for the over-approximation of the existing Slope2=10,000% interest curve requires reducing the slope2 parameter.</li>\n<li>Taking advantage of the exponential curve allows for:\na. Setting a higher optimal utilization rate.\nb. Setting a higher maximum APY to reduce the potential for\nutilization being at 100% for extended periods without creating a too steep of an interest rate increase right above the optimal utilization rate.</li>\n</ol>\n<h2>Implementation</h2>\n<p>A deployment of the existing implementation of the Interest Strategy will be used, with the following parameters:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">optimalUtilizationRate: new BigNumber(0.8).multipliedBy(oneRay).toFixed(),\nbaseVariableBorrowRate: new BigNumber(0).multipliedBy(oneRay).toFixed(),\nvariableRateSlope1: new BigNumber(0.02).multipliedBy(oneRay).toFixed(),\nvariableRateSlope2: new BigNumber(7.5).multipliedBy(oneRay).toFixed(),</code></pre></div>\n<p><a href=\"https://etherscan.io/address/0x84d1FaD9559b8AC1Fda17d073B8542c8Fb6986dd#readContract\">https://etherscan.io/address/0x84d1FaD9559b8AC1Fda17d073B8542c8Fb6986dd#readContract</a></p>\n<h2>Copyright</h2>\n<p>Copyright and related rights waived via <a href=\"https://creativecommons.org/publicdomain/zero/1.0/\">CC0</a>.</p>","frontmatter":{"aip":35,"title":"Adjust interest rate to account for APY over-approximation","status":"Proposed","author":"Ahmed Naguib Aly (@ahnaguib)","discussions":"https://governance.aave.com/t/arc-update-ampl-interest-rate-curve-to-account-for-over-approximation-in-compounded-interest/5350","created":"July 26, 2021","updated":null}}},"pageContext":{"slug":"/AIP-35/","previous":{"fields":{"slug":"/AIP-33/"},"frontmatter":{"title":"Add FEI to Aave V2","status":"Proposed","aip":33}},"next":{"fields":{"slug":"/AIP-37/"},"frontmatter":{"title":"Update to the Liquidity Mining Distribution","status":"Proposed","aip":37}}}}}